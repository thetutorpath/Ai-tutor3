<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Tutor - Kritika</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      display: flex;
      justify-content: center;
      padding: 20px;
    }
    .container {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      max-width: 700px;
      width: 100%;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    textarea, input[type="text"] {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button, select, input[type="file"] {
      padding: 10px 15px;
      margin: 5px;
      border-radius: 5px;
      border: none;
      cursor: pointer;
    }
    #whiteboard {
      display: none;
      border: 2px solid #ccc;
      margin-top: 10px;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>üéì AI Tutor - Kritika</h1>
  
  <label for="voiceType">Voice Type:</label>
  <select id="voiceType">
    <option value="female" selected>Female Voice</option>
    <option value="male">Male Voice</option>
  </select>

  <br />
  <label><input type="checkbox" id="enableHindi" checked /> Enable Hindi Translation</label>

  <br />
  <label>Voice Speed:</label>
  <input type="range" id="speedControl" min="0.5" max="1.5" value="1" step="0.1" />

  <br /><br />
  <button onclick="toggleMode()">Switch to Whiteboard Mode</button>
  
  <div id="chatMode">
    <textarea id="userInput" rows="3" placeholder="Ask your question or upload file..."></textarea>
    <button onclick="submitQuery()">Submit</button>
    <button onclick="repeatAnswer()">‚ñ∂Ô∏è Repeat</button>
    <button onclick="pauseAudio()">‚è∏Ô∏è Pause</button>
    <button onclick="resumeAudio()">‚ñ∂Ô∏è Resume</button>
    <br />
    <label><strong>üìÅ Upload File</strong></label>
    <input type="file" id="fileInput" accept=".txt, .pdf, .jpeg, .jpg" />
  </div>

  <canvas id="whiteboard" width="600" height="300"></canvas>
  <br />
  <button onclick="clearWhiteboard()">Clear</button>
</div>

<script>
  let audio = new Audio();
  let currentText = "";
  let whiteboardMode = false;

  function toggleMode() {
    whiteboardMode = !whiteboardMode;
    document.getElementById("chatMode").style.display = whiteboardMode ? "none" : "block";
    document.getElementById("whiteboard").style.display = whiteboardMode ? "block" : "none";
  }

  function submitQuery() {
    const text = document.getElementById("userInput").value;
    const enableHindi = document.getElementById("enableHindi").checked;
    const speed = parseFloat(document.getElementById("speedControl").value);
    const voiceType = document.getElementById("voiceType").value;

    // Simulate answer generation
    const answer = `AI Response: ${text}`;
    currentText = enableHindi ? `AI ‡§ú‡§µ‡§æ‡§¨: ${text}` : answer;

    if (whiteboardMode) drawOnWhiteboard(currentText);
    speak(currentText, voiceType, speed);
  }

  function speak(text, voiceType, speed) {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.rate = speed;
    utterance.lang = text.includes("\u0900") ? 'hi-IN' : 'en-IN';

    const voices = speechSynthesis.getVoices();
    utterance.voice = voices.find(v =>
      (voiceType === "female" ? v.name.includes("Female") : v.name.includes("Male")) &&
      v.lang.includes("IN")
    ) || voices[0];

    speechSynthesis.cancel();
    speechSynthesis.speak(utterance);
  }

  function repeatAnswer() {
    const voiceType = document.getElementById("voiceType").value;
    const speed = parseFloat(document.getElementById("speedControl").value);
    speak(currentText, voiceType, speed);
  }

  function pauseAudio() {
    speechSynthesis.pause();
  }

  function resumeAudio() {
    speechSynthesis.resume();
  }

  function clearWhiteboard() {
    const canvas = document.getElementById("whiteboard");
    const ctx = canvas.getContext("2d");
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }

  function drawOnWhiteboard(text) {
    const canvas = document.getElementById("whiteboard");
    const ctx = canvas.getContext("2d");
    ctx.font = "18px Arial";
    ctx.fillStyle = "black";
    ctx.fillText(text, 20, 50);
  }

  // Enable drawing by student
  const canvas = document.getElementById("whiteboard");
  let drawing = false;
  canvas.addEventListener("mousedown", () => drawing = true);
  canvas.addEventListener("mouseup", () => drawing = false);
  canvas.addEventListener("mousemove", draw);

  function draw(e) {
    if (!drawing) return;
    const ctx = canvas.getContext("2d");
    ctx.lineWidth = 2;
    ctx.lineCap = "round";
    ctx.strokeStyle = "blue";
    ctx.lineTo(e.offsetX, e.offsetY);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(e.offsetX, e.offsetY);
  }

  window.onload = () => {
    // Load voices
    setTimeout(() => speechSynthesis.getVoices(), 100);
  }
</script>
</body>
</html>
